# **-DE-CODER-ESP_NEW - –ø—Ä–æ–µ–∫—Ç**
# CODER>ESP_NEW - –±–ª–æ–∫
–¢–µ–ø–µ—Ä—å —è –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–Ω—è–ª –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É. –¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞ ‚Äî —Ä–∞—Å—à–∏—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—Ö–æ–¥–æ–≤ –¥–ª—è –±–ª–æ–∫–∞ ESP_NOW ESP8266, –æ–±—ä–µ–¥–∏–Ω–∏–≤ –¥–∞–Ω–Ω—ã–µ –æ—Ç –º–Ω–æ–≥–∏—Ö –¥–∞—Ç—á–∏–∫–æ–≤ –≤ –æ–¥–∏–Ω –ø–∞–∫–µ—Ç, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å —á–µ—Ä–µ–∑ –æ–¥–∏–Ω –≤—Ö–æ–¥ ESP-NOW –±–ª–æ–∫–∞.

## –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∑–∞–¥–∞—á–∞:
CODER>ESP_NEW –¥–æ–ª–∂–µ–Ω —É–ø–∞–∫–æ–≤—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –æ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –¥–∞—Ç—á–∏–∫–æ–≤ –≤ –µ–¥–∏–Ω—ã–π –ø–æ—Ç–æ–∫, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –ø–æ–¥–∞—Ç—å –Ω–∞ –æ–¥–∏–Ω –∏–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤—Ö–æ–¥–æ–≤ –±–ª–æ–∫–∞ ESP_NOW ESP8266.

##  –†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤—Ö–æ–¥–∞ String

–£ –±–ª–æ–∫–∞ ESP_NOW ESP8266 –µ—Å—Ç—å –≤—Ö–æ–¥—ã —Ç–∏–ø–∞ String.

–°—Ç—Ä–æ–∫–∞ –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.

–≠—Ç–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—é –ø—Ä–æ–µ–∫—Ç–∞.

## –ò—Ç–æ–≥–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:

[–î–∞—Ç—á–∏–∫ 1 Float] ‚îÄ‚îÄ‚îÄ‚îê
[–î–∞—Ç—á–∏–∫ 2 Float] ‚îÄ‚îÄ‚îÄ‚î§
[–î–∞—Ç—á–∏–∫ 3 Float] ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ> [CODER>ESP_NEW] ‚îÄ‚îÄ> (–í—ã—Ö–æ–¥ String) ‚îÄ‚îÄ> [–í—Ö–æ–¥ String ESP_NOW ESP8266]
[–î–∞—Ç—á–∏–∫ 1 Int]   ‚îÄ‚îÄ‚îÄ‚î§
[–î–∞—Ç—á–∏–∫ 2 Int]   ‚îÄ‚îÄ‚îÄ‚î§
[–î–∞—Ç—á–∏–∫ 3 Int]   ‚îÄ‚îÄ‚îÄ‚îò

## –í—Ö–æ–¥—ã-–í—ã—Ö–æ–¥—ã

–¢–∏–ø	–ò–º—è	–û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è	–¢–∏–ø –¥–∞–Ω–Ω—ã—Ö
–í—Ö–æ–¥	in_sensor1_float	–î1 (float)	Float
–í—Ö–æ–¥	in_sensor2_float	–î2 (float)	Float
–í—Ö–æ–¥	in_sensor3_float	–î3 (float)	Float
–í—Ö–æ–¥	in_sensor1_int	–î4 (int)	Integer
–í—Ö–æ–¥	in_sensor2_int	–î5 (int)	Integer
–í—Ö–æ–¥	in_sensor3_int	–î6 (int)	Integer
–í—Ö–æ–¥	in_peer_mac	MAC –ø–æ–ª—É—á–∞—Ç–µ–ª—è	String
–í—Ö–æ–¥	in_trigger	–¢—Ä–∏–≥–≥–µ—Ä	Boolean
–í—ã—Ö–æ–¥	out_debug_str	–¥–∞–Ω–Ω—ã–µ –¥–ª—è ESP-NOW	String

------------

–¢–∏–ø	–ò–º—è (Name)	–¢–∏–ø –¥–∞–Ω–Ω—ã—Ö (Data Type)
–í—Ö–æ–¥	in_espnow_string	String
–í—Ö–æ–¥	in_trigger	Boolean
–í—ã—Ö–æ–¥	out_sensor1_float	Float
–í—ã—Ö–æ–¥	out_sensor2_float	Float
–í—ã—Ö–æ–¥	out_sensor3_float	Float
–í—ã—Ö–æ–¥	out_sensor1_int	Integer
–í—ã—Ö–æ–¥	out_sensor2_int	Integer
–í—ã—Ö–æ–¥	out_sensor3_int	Integer
–í—ã—Ö–æ–¥	out_debug_str	String

## –§–æ—Ä–º–∞—Ç —Å—Ç—Ä–æ–∫–∏:

CODER –±—É–¥–µ—Ç —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–æ–∫—É –≤–∏–¥–∞ F1:25.50;F2:30.10;I1:100;I2:200;..., –≥–¥–µ:

F1, F2 ‚Äî –∫–ª—é—á–∏ –¥–ª—è float-–¥–∞—Ç—á–∏–∫–æ–≤

I1, I2 ‚Äî –∫–ª—é—á–∏ –¥–ª—è int-–¥–∞—Ç—á–∏–∫–æ–≤

–î–µ–∫–æ–¥–µ—Ä –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –ø—Ä–∏–µ–º–Ω–∏–∫–∞ –±—É–¥–µ—Ç —Ä–∞–∑–±–∏—Ä–∞—Ç—å —ç—Ç—É —Å—Ç—Ä–æ–∫—É –ø–æ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—é ; –∏ –∫–ª—é—á–∞–º, –Ω–∞–ø—Ä–∞–≤–ª—è—è –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ –Ω—É–∂–Ω—ã–µ –≤—ã—Ö–æ–¥—ã.

–ù—É–∂–Ω–æ –ª–∏ –º–Ω–µ —Å—Ä–∞–∑—É –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å –∫–æ–¥ CODER>ESP_NEW –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–∞–∫–æ–π —Å—Ç—Ä–æ–∫–∏? –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –º—ã —Å–æ–∑–¥–∞–¥–∏–º DECODER_ESP_NEW.

## DeclareSection

```cpp
// –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π –¥–∞—Ç—á–∏–∫–æ–≤
float old_f1 = 0, old_f2 = 0, old_f3 = 0;
int old_i1 = 0, old_i2 = 0, old_i3 = 0;
bool firstRun = true;
```

## LoopSection
```cpp
// –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ü–†–ò –ü–ï–†–í–û–ú –ó–ê–ü–£–°–ö–ï
if (firstRun) {
    old_f1 = in_sensor1_float;
    old_f2 = in_sensor2_float;
    old_f3 = in_sensor3_float;
    old_i1 = in_sensor1_int;
    old_i2 = in_sensor2_int;
    old_i3 = in_sensor3_int;
    firstRun = false;
    out_debug_str = "Coder INIT";
    return;
}
// –û–°–ù–û–í–ù–ê–Ø –õ–û–ì–ò–ö–ê: –ü–†–û–í–ï–†–Ø–ï–ú –ò–ó–ú–ï–ù–ï–ù–ò–Ø –ò –§–û–†–ú–ò–†–£–ï–ú –°–¢–†–û–ö–£
if (in_trigger) {
    // --- –ü—Ä–æ–≤–µ—Ä–∫–∞ FLOAT –¥–∞—Ç—á–∏–∫–æ–≤ ---
    if (in_sensor1_float != old_f1) {
        out_espnow_string = "F1:" + String(in_sensor1_float, 2);
        out_debug_str = "Sent -> " + out_espnow_string;
        old_f1 = in_sensor1_float;
        return;
    }
    if (in_sensor2_float != old_f2) {
        out_espnow_string = "F2:" + String(in_sensor2_float, 2);
        out_debug_str = "Sent -> " + out_espnow_string;
        old_f2 = in_sensor2_float;
        return;
    }
    if (in_sensor3_float != old_f3) {
        out_espnow_string = "F3:" + String(in_sensor3_float, 2);
        out_debug_str = "Sent -> " + out_espnow_string;
        old_f3 = in_sensor3_float;
        return;
    }
    // --- –ü—Ä–æ–≤–µ—Ä–∫–∞ INT –¥–∞—Ç—á–∏–∫–æ–≤ ---
    if (in_sensor1_int != old_i1) {
        out_espnow_string = "I1:" + String(in_sensor1_int);
        out_debug_str = "Sent -> " + out_espnow_string;
        old_i1 = in_sensor1_int;
        return;
    }
    if (in_sensor2_int != old_i2) {
        out_espnow_string = "I2:" + String(in_sensor2_int);
        out_debug_str = "Sent -> " + out_espnow_string;
        old_i2 = in_sensor2_int;
        return;
    }
    if (in_sensor3_int != old_i3) {
        out_espnow_string = "I3:" + String(in_sensor3_int);
        out_debug_str = "Sent -> " + out_espnow_string;
        old_i3 = in_sensor3_int;
        return;
    }
    out_debug_str = "No changes";
}
```
### –ß—Ç–æ –ø–æ–ª—É—á–∏–ª–æ—Å—å:

–ë–ª–æ–∫ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ 6 –≤—Ö–æ–¥–∞—Ö.

–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –æ–¥–Ω–æ–≥–æ –¥–∞—Ç—á–∏–∫–∞ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –∫–æ–º–ø–∞–∫—Ç–Ω—É—é —Å—Ç—Ä–æ–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, "F1:25.50").

–≠—Ç–∞ —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∞–µ—Ç—Å—è –Ω–∞ –≤—ã—Ö–æ–¥ out_espnow_string, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫ —Å—Ç—Ä–æ–∫–æ–≤–æ–º—É –≤—Ö–æ–¥—É (String) –±–ª–æ–∫–∞ ESP_NOW ESP8266 (–ø–µ—Ä–µ–¥–∞—Ç—á–∏–∫).

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –±–ª–æ–∫. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –º—ã —Å–æ–∑–¥–∞–¥–∏–º DECODER_ESP_NEW –¥–ª—è —Ä–∞–∑–±–æ—Ä–∞ —Ç–∞–∫–æ–π —Å—Ç—Ä–æ–∫–∏ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –ø—Ä–∏–µ–º–Ω–∏–∫–∞.
## ‚ö†Ô∏è –í–∞–∂–Ω–æ–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –ø–∞–º—è—Ç–∏
–ü—Ä–æ–µ–∫—Ç —É—Å–ø–µ—à–Ω–æ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –≤ Arduino IDE 2.3.7. –û–¥–Ω–∞–∫–æ, –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ FLProg –≤–∞–∂–Ω–æ —É—á–∏—Ç—ã–≤–∞—Ç—å, —á—Ç–æ —Å–ª—É–∂–µ–±–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —Å—Ä–µ–¥—ã (FLProg_Utilites, RT_HW_BASE) –ø–æ—Ç—Ä–µ–±–ª—è—é—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—É—é —á–∞—Å—Ç—å –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ ESP8266 (IRAM).

–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –¥–ª—è –±—É–¥—É—â–µ–π —Å–±–æ—Ä–∫–∏ –ø–æ–ª–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã (CODER>ESP_NEW + ESP_NOW ESP8266):

–í Arduino IDE –≤—ã–±–µ—Ä–∏—Ç–µ –¥–ª—è –ø–ª–∞—Ç—ã –≤–∞—Ä–∏–∞–Ω—Ç "Flash Size" —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º "4MB (FS:3MB OTA:~1019KB)" –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –≤—ã–¥–µ–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏ –ø–æ–¥ –∫–æ–¥ (IRAM).

–ú–∏–Ω–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥—Ä—É–≥–∏—Ö –±–ª–æ–∫–æ–≤ –≤ –ø—Ä–æ–µ–∫—Ç–µ FLProg.

üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∞—Ä—Ö–∏–≤–∞ –ø—Ä–æ–µ–∫—Ç–∞
–î–ª—è –ø–æ–ª–Ω–æ—Ç—ã –∞—Ä—Ö–∏–≤–∞ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —É–∂–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –∫–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã:

–ö–æ–¥ –¥–ª—è LoopSection_LoopSection ‚Äì –∞–∫—Ç—É–∞–ª—å–Ω—ã–π, —Ä–∞–±–æ—á–∏–π –∫–æ–¥ –±–ª–æ–∫–∞.

ESP_NOW ESP8266 –∫–æ–¥ –±–ª–æ–∫–∞ –∏–∑ flprog ‚Äì –ø—Ä–∏–º–µ—Ä —Ä–∞–±–æ—á–µ–≥–æ –±–ª–æ–∫–∞ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è.

–ö–æ–º–ø–∏–ª—è—Ü–∏—è —Å–∫–µ—Ç—á–∞ ‚Äì –ø—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –ª–æ–≥–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏.


# **–±–ª–æ–∫ DECODER_ESP_NEW - –¥–∞–ª–µ–µ**

## –ö–æ–¥ –¥–ª—è DeclareSection
```cpp
// –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Ä–∞–∑–æ–±—Ä–∞–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
float last_f1 = 0, last_f2 = 0, last_f3 = 0;
int last_i1 = 0, last_i2 = 0, last_i3 = 0;
```

## –ö–æ–¥ –¥–ª—è LoopSection
```cpp
// –û–°–ù–û–í–ù–ê–Ø –õ–û–ì–ò–ö–ê: –ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –ø–æ –ø–µ—Ä–µ–¥–Ω–µ–º—É —Ñ—Ä–æ–Ω—Ç—É in_trigger
if (in_trigger && in_espnow_string.length() > 0) {
    // –ò—â–µ–º —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å ':'
    int colonIndex = in_espnow_string.indexOf(':');
    
    if (colonIndex != -1) {
        // –†–∞–∑–¥–µ–ª—è–µ–º —Å—Ç—Ä–æ–∫—É –Ω–∞ –∫–ª—é—á –∏ –∑–Ω–∞—á–µ–Ω–∏–µ
        String key = in_espnow_string.substring(0, colonIndex);
        String valStr = in_espnow_string.substring(colonIndex + 1);
        
        // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º —Å—Ç—Ä–æ–∫—É –∑–Ω–∞—á–µ–Ω–∏—è –≤ —á–∏—Å–ª–æ (float)
        float value = valStr.toFloat();
        
        // –†–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ –∫–ª—é—á—É
        if (key == "F1") {
            last_f1 = value;
            out_sensor1_float = last_f1;
            out_debug_str = "D: F1=" + String(last_f1, 2);
        }
        else if (key == "F2") {
            last_f2 = value;
            out_sensor2_float = last_f2;
            out_debug_str = "D: F2=" + String(last_f2, 2);
        }
        else if (key == "F3") {
            last_f3 = value;
            out_sensor3_float = last_f3;
            out_debug_str = "D: F3=" + String(last_f3, 2);
        }
        else if (key == "I1") {
            last_i1 = (int)value; // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º float –æ–±—Ä–∞—Ç–Ω–æ –≤ int
            out_sensor1_int = last_i1;
            out_debug_str = "D: I1=" + String(last_i1);
        }
        else if (key == "I2") {
            last_i2 = (int)value;
            out_sensor2_int = last_i2;
            out_debug_str = "D: I2=" + String(last_i2);
        }
        else if (key == "I3") {
            last_i3 = (int)value;
            out_sensor3_int = last_i3;
            out_debug_str = "D: I3=" + String(last_i3);
        }
        else {
            out_debug_str = "D: Unknown key -> " + in_espnow_string;
        }
    } else {
        out_debug_str = "D: Invalid format -> " + in_espnow_string;
    }
}
```
###  –ò—Ç–æ–≥–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –Ω–∞ –ø—Ä–∏—ë–º–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω–µ:

[ESP_NOW ESP8266 (–†–µ–∂–∏–º "–ü—Ä–∏–µ–º")] --> (–í—ã—Ö–æ–¥ String) --> [DECODER_ESP_NEW.in_espnow_string]
                                                               |
                                            [DECODER_ESP_NEW.out_sensor1_float] --> [Nextion]
                                            [DECODER_ESP_NEW.out_sensor2_float] --> [Nextion]
                                                               ... –∏ —Ç.–¥.
### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ—Ç–ª–∞–¥–∫–∏ –Ω–∞ –ø—Ä–∏—ë–º–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω–µ

[ESP_NOW ESP8266 (Receiver)] --- (debug String) ---> [Software UART 1] ---> –ú–æ–Ω–∏—Ç–æ—Ä –ø–æ—Ä—Ç–∞ (–°—Ç—Ä–æ–∫–∞ 1)
         ‚Üì
(espnow_string) ---> [DECODER_ESP_NEW] --- (out_debug_str) ---> [Software UART 2] ---> –ú–æ–Ω–∏—Ç–æ—Ä –ø–æ—Ä—Ç–∞ (–°—Ç—Ä–æ–∫–∞ 2)

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–ª–æ–∫–∞ ESP_NOW ESP8266 (–ø—Ä–∏—ë–º–Ω–∏–∫)

–í –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö –±–ª–æ–∫–∞ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ —Ñ–ª–∞–∂–æ–∫ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≤—ã—Ö–æ–¥–∞ debug (—Å–º. –ø—É–Ω–∫—Ç 2.3 –æ–ø–∏—Å–∞–Ω–∏—è: "debug - –≤—ã—Ö–æ–¥ –¥–ª—è –≤—ã–≤–æ–¥–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø—Ä–∏ –æ—Ç–ª–∞–¥–∫–µ...").

–í –ø—Ä–æ–µ–∫—Ç–µ FLProg:

–î–æ–±–∞–≤—å—Ç–µ –±–ª–æ–∫ Software UART.

–ü–æ–¥–∫–ª—é—á–∏—Ç–µ –≤—ã—Ö–æ–¥ debug –±–ª–æ–∫–∞ ESP_NOW ESP8266 –∫–æ –≤—Ö–æ–¥—É –±–ª–æ–∫–∞ Software UART.

–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Software UART –≤—ã–±–µ—Ä–∏—Ç–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, UART1 –∏ —Å–∫–æ—Ä–æ—Å—Ç—å (115200).

–¢–µ–ø–µ—Ä—å –≤ –ú–æ–Ω–∏—Ç–æ—Ä–µ –ø–æ—Ä—Ç–∞ –≤—ã –±—É–¥–µ—Ç–µ –≤–∏–¥–µ—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç ESP-NOW.

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ DECODER_ESP_NEW –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

–ú—ã —É–∂–µ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–ª–∏ –≤—ã—Ö–æ–¥ out_debug_str. –ù—É–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏ –µ–≥–æ –Ω–∞ –≤—Ç–æ—Ä–æ–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –ø–æ—Ä—Ç.

–í –ø—Ä–æ–µ–∫—Ç–µ FLProg:

–î–æ–±–∞–≤—å—Ç–µ –≤—Ç–æ—Ä–æ–π –±–ª–æ–∫ Software UART (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥—Ä—É–≥–æ–π –∫–∞–Ω–∞–ª —Ç–æ–≥–æ –∂–µ –±–ª–æ–∫–∞, –µ—Å–ª–∏ –æ–Ω –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ).

–ü–æ–¥–∫–ª—é—á–∏—Ç–µ –≤—ã—Ö–æ–¥ out_debug_str –±–ª–æ–∫–∞ DECODER_ESP_NEW –∫–æ –≤—Ö–æ–¥—É —ç—Ç–æ–≥–æ Software UART.

–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –≤—ã–±–µ—Ä–∏—Ç–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, UART2.

## –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ –¥–ª—è LoopSection DECODER_ESP_NEW (—É–ª—É—á—à–µ–Ω–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞)

–ß—Ç–æ–±—ã –≤ –ú–æ–Ω–∏—Ç–æ—Ä–µ –ø–æ—Ä—Ç–∞ –±—ã–ª–æ –ø–æ–Ω—è—Ç–Ω–µ–µ, –º–æ–∂–Ω–æ –Ω–µ–º–Ω–æ–≥–æ –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç—Ä–æ–∫—É –æ—Ç–ª–∞–¥–∫–∏ –≤ –∫–æ–¥–µ LoopSection DECODER_ESP_NEW. –ù–∞–π–¥–∏—Ç–µ –±–ª–æ–∫–∏ out_debug_str = "D: F1=..." –∏ –∑–∞–º–µ–Ω–∏—Ç–µ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ –Ω–∞ –±–æ–ª–µ–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ–µ:

## LoopSection –±–ª–æ–∫–∞ DECODER_ESP_NEW:
```cpp
// –û–°–ù–û–í–ù–ê–Ø –õ–û–ì–ò–ö–ê: –ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –ø–æ –ø–µ—Ä–µ–¥–Ω–µ–º—É —Ñ—Ä–æ–Ω—Ç—É in_trigger
if (in_trigger && in_espnow_string.length() > 0) {
    // –ò—â–µ–º —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å ':'
    int colonIndex = in_espnow_string.indexOf(':');
    
    if (colonIndex != -1) {
        // –†–∞–∑–¥–µ–ª—è–µ–º —Å—Ç—Ä–æ–∫—É –Ω–∞ –∫–ª—é—á –∏ –∑–Ω–∞—á–µ–Ω–∏–µ
        String key = in_espnow_string.substring(0, colonIndex);
        String valStr = in_espnow_string.substring(colonIndex + 1);
        
        // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º —Å—Ç—Ä–æ–∫—É –∑–Ω–∞—á–µ–Ω–∏—è –≤ —á–∏—Å–ª–æ (float)
        float value = valStr.toFloat();
        
        // –†–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ –∫–ª—é—á—É –∏ —Ñ–æ—Ä–º–∏—Ä—É–µ–º –û–î–ù–£ –æ—Ç–ª–∞–¥–æ—á–Ω—É—é —Å—Ç—Ä–æ–∫—É
        if (key == "F1") {
            last_f1 = value;
            out_sensor1_float = last_f1;
            out_debug_str = "[DECODER] Key:F1 Val:" + String(last_f1, 2);
        }
        else if (key == "F2") {
            last_f2 = value;
            out_sensor2_float = last_f2;
            out_debug_str = "[DECODER] Key:F2 Val:" + String(last_f2, 2);
        }
        else if (key == "F3") {
            last_f3 = value;
            out_sensor3_float = last_f3;
            out_debug_str = "[DECODER] Key:F3 Val:" + String(last_f3, 2);
        }
        else if (key == "I1") {
            last_i1 = (int)value;
            out_sensor1_int = last_i1;
            out_debug_str = "[DECODER] Key:I1 Val:" + String(last_i1);
        }
        else if (key == "I2") {
            last_i2 = (int)value;
            out_sensor2_int = last_i2;
            out_debug_str = "[DECODER] Key:I2 Val:" + String(last_i2);
        }
        else if (key == "I3") {
            last_i3 = (int)value;
            out_sensor3_int = last_i3;
            out_debug_str = "[DECODER] Key:I3 Val:" + String(last_i3);
        }
        else {
            out_debug_str = "[DECODER] ERR: Unknown key -> " + in_espnow_string;
        }
    } else {
        out_debug_str = "[DECODER] ERR: Invalid format -> " + in_espnow_string;
    }
}
```                                                                           
##  –ü–æ—Ä—è–¥–æ–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–°–æ–±–µ—Ä–∏—Ç–µ —Å—Ö–µ–º—É –ø–µ—Ä–µ–¥–∞—Ç—á–∏–∫–∞ (CODER>ESP_NEW ‚Üí ESP_NOW (Transmitter)).

–°–æ–±–µ—Ä–∏—Ç–µ —Å—Ö–µ–º—É –ø—Ä–∏—ë–º–Ω–∏–∫–∞ –∫–∞–∫ —É–∫–∞–∑–∞–Ω–æ –≤—ã—à–µ.

–û—Ç–∫—Ä–æ–π—Ç–µ –ú–æ–Ω–∏—Ç–æ—Ä –ø–æ—Ä—Ç–∞ (–¥–≤–∞ –æ–∫–Ω–∞ –¥–ª—è –¥–≤—É—Ö UART –∏–ª–∏ –æ–¥–∏–Ω —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π).

–ü–æ–¥–∞–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞ –¥–∞—Ç—á–∏–∫ –ø–µ—Ä–µ–¥–∞—Ç—á–∏–∫–∞. –î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
                    
–°–æ–æ–±—â–µ–Ω–∏–µ –æ –æ—Ç–ø—Ä–∞–≤–∫–µ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –ø–µ—Ä–µ–¥–∞—Ç—á–∏–∫–∞.

–°–æ–æ–±—â–µ–Ω–∏–µ –æ –ø—Ä–∏—ë–º–µ –æ—Ç ESP_NOW (Receiver).

–°–æ–æ–±—â–µ–Ω–∏–µ "[DECODER] Key:..." –æ —É—Å–ø–µ—à–Ω–æ–º —Ä–∞–∑–±–æ—Ä–µ.

 ### –ö–ª—é—á–µ–≤–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ:
 
 –í—Å–µ 6 —Å—Ç—Ä–æ–∫ out_debug_str = "D: F1=... –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ –µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç "[DECODER] Key:XX Val:...".

–î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–µ—Ñ–∏–∫—Å—ã [DECODER] –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏ ERR: –¥–ª—è –æ—à–∏–±–æ–∫.

