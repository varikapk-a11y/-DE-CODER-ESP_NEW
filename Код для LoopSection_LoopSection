## для блока CODER>ESP_NEW
-----------------
# Код для DeclareSection
// Переменные для хранения предыдущих значений датчиков
float old_f1= 0, old_f2 = 0, old_f3 = 0;
int old_i1= 0, old_i2 = 0, old_i3 = 0;
bool firstRun= true;
------------
# Код для LoopSection
// === ОПРЕДЕЛЕНИЕ ФУНКЦИИ ===
void sendSensorUpdate(String key, float value) {
    out_espnow_string = key + ":" + String(value, 2);
    out_debug_str = "Sent -> " + out_espnow_string;
}

// === ОСНОВНОЙ КОД ===
// ИНИЦИАЛИЗАЦИЯ ПРИ ПЕРВОМ ЗАПУСКЕ
if (firstRun) {
    old_f1 = in_sensor1_float;
    old_f2 = in_sensor2_float;
    old_f3 = in_sensor3_float;
    old_i1 = in_sensor1_int;
    old_i2 = in_sensor2_int;
    old_i3 = in_sensor3_int;
    firstRun = false;
    out_debug_str = "Coder INIT";
    return;
}

// ОСНОВНАЯ ЛОГИКА: ПРОВЕРЯЕМ ИЗМЕНЕНИЯ И ФОРМИРУЕМ СТРОКУ
if (in_trigger) {
if (in_sensor1_float != old_f1) {
    // Вместо вызова функции — её код
    out_espnow_string = "F1:" + String(in_sensor1_float, 2);
    out_debug_str = "Sent -> " + out_espnow_string;
    // Конец кода функции
    old_f1 = in_sensor1_float;
    return;
    }
   if (in_sensor2_float != old_f2) {
    // Вместо вызова функции — её код
    out_espnow_string = "F2:" + String(in_sensor2_float, 2);
    out_debug_str = "Sent -> " + out_espnow_string;
    // Конец кода функции
    old_f2 = in_sensor2_float;
    return;
    }
  if (in_sensor3_float != old_f3) {
    // КОД из sendSensorUpdate("F3", ...)
    out_espnow_string = "F3:" + String(in_sensor3_float, 2);
    out_debug_str = "Sent -> " + out_espnow_string;
    // КОНЕЦ кода функции
    old_f3 = in_sensor3_float;
    return;
    }
   if (in_sensor1_int != old_i1) {
    // КОД из sendSensorUpdate("I1", ...)
    out_espnow_string = "I1:" + String(in_sensor1_int); // Для int не нужно 2 знака после запятой
    out_debug_str = "Sent -> " + out_espnow_string;
    // КОНЕЦ кода функции
    old_i1 = in_sensor1_int;
    return;
    }
if (in_sensor2_int != old_i2) {
    // КОД из sendSensorUpdate("I2", ...)
    out_espnow_string = "I2:" + String(in_sensor2_int); // Для int не нужно 2 знака после запятой
    out_debug_str = "Sent -> " + out_espnow_string;
    // КОНЕЦ кода функции
    old_i2 = in_sensor2_int;
    return;
    }
    if (in_sensor3_int != old_i3) {
    // КОД из sendSensorUpdate("I3", ...)
    out_espnow_string = "I3:" + String(in_sensor3_int); // Для int не нужно 2 знака после запятой
    out_debug_str = "Sent -> " + out_espnow_string;
    // КОНЕЦ кода функции
    old_i3 = in_sensor3_int;
    return;
    }
    out_debug_str = "No changes";
}

--------------------

# Входы-Выходы
Тип Имя Отображаемое имя Тип данных Вход in_sensor1_float Д1 (float) Float 
Вход in_sensor2_float Д2 (float) Float Вход in_sensor3_float Д3 (float) Float 
Вход in_sensor1_int Д4 (int) Integer Вход in_sensor2_int Д5 (int) Integer 
Вход in_sensor3_int Д6 (int) Integer Вход in_peer_mac MAC получателя String 
Вход in_trigger Триггер Boolean Выход out_debug_str данные для ESP-NOW String

Тип Имя (Name) Тип данных (Data Type) Вход in_espnow_string String 
Вход in_trigger Boolean Выход out_sensor1_float Float Выход out_sensor2_float Float 
Выход out_sensor3_float Float Выход out_sensor1_int Integer Выход out_sensor2_int Integer 
Выход out_sensor3_int Integer Выход out_debug_str String
